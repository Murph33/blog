

<h1> <%= @post.title %></h1>

<h3> <%= @post.body %></h3>
<% if current_user.present? %>
  <% if @post.favourited_by?(current_user) %>
    <%= link_to "Un-Favourite", post_favourite_path(@post, @favourite),
                              method: :delete %>
  <% else %>
    <%= link_to "Favourite", post_favourites_path(@post), method: :post %>
  <% end %>
  <%= link_to "Edit", edit_post_path(@post) %>
  <%= link_to "Delete", post_path(@post), method: :delete, remote: true,
                      data: { confirm: "Are you sure you want to delete this?" } %>
<% end %>


<%= render "/comments/form" %>

<div id="comment_box">
<%# @post.comments.sort_by {|comment| comment.id }.reverse.each_with_index do |comment,i| %>
<% @comments.each_with_index do |comment,i| %>

  <%= render "/comments/comment", comment: comment %>

<% end %>

<%= flash[:notice] if flash[:notice] %>


</div>
